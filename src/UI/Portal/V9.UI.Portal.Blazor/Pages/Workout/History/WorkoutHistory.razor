@attribute [Authorize]
@page "/workout/history"

@using V9.UI.Portal.Services.Workout.Contracts
@using V9.UI.Core.Providers
@using V9.UI.Core.Extensions
@using V9.UI.Portal.Services.Workout.Views
@using V9.UI.Portal.Blazor.Pages.Workout.History.Components
@using V9.UI.Portal.Security

@inject IWorkoutClient _client
@inject TokenAuthenticationStateProvider _authenticationProvider

<div class="container d-flex justify-content-center px-5">
    <div class="row my-5" style="/*width: 80%;*/width: inherit;">
        <div class="col p-5 text-center" style="background-color: #353945;border-radius: 20px;">
            <h2 class="text-white pt-5" style="font-size: 48px;">Your complete list of past workouts</h2>
            <p class="pb-5" style="color: #777E90;font-size: 24px;">Perfect workouts powered by Deep Learning technologies</p>
        </div>
    </div>
</div>
<div class="container px-5">
    <div class="row" style="/*width: inherit;*/">
        <div class="col-6">
            <p class="text-white" style="font-size: 24px;">Browse previous workouts</p>
        </div>
        <div class="col-3 offset-3">
            <div class="border-1" style="border-radius: 20px;border: 1px solid #777E90;/*border-radius: 20px;*//*border-color: white;*/">
                <div class="input-group p-1" style="/*border-radius: 20px;*//*border-color: white;*/">
                    <input class="form-control bg-dark border-0 shadow-none text-white" type="text" placeholder="Search in workouts">
                    <button class="btn btn-primary" type="button" style="border-radius: 50px;">
                        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" width="1em" height="1em" fill="currentColor" style="font-size: 18px;">
                            <path d="M500.3 443.7l-119.7-119.7c27.22-40.41 40.65-90.9 33.46-144.7C401.8 87.79 326.8 13.32 235.2 1.723C99.01-15.51-15.51 99.01 1.724 235.2c11.6 91.64 86.08 166.7 177.6 178.9c53.8 7.189 104.3-6.236 144.7-33.46l119.7 119.7c15.62 15.62 40.95 15.62 56.57 0C515.9 484.7 515.9 459.3 500.3 443.7zM79.1 208c0-70.58 57.42-128 128-128s128 57.42 128 128c0 70.58-57.42 128-128 128S79.1 278.6 79.1 208z"></path>
                        </svg>
                    </button>
                </div>
            </div>
        </div>
    </div>
    <hr class="py-2" style="color: #777E90;">
    <div class="row pb-2">
        <div class="col">
            <div class="dropdown">
                <button class="btn btn-primary dropdown-toggle w-50 bg-dark text-start" aria-expanded="false" data-bs-toggle="dropdown" type="button" style="border-radius: 10px;border: 2px solid #353945;">Newest</button>
                <div class="dropdown-menu">
                    <a class="dropdown-item" href="#">First Item</a><a class="dropdown-item" href="#">Second Item</a><a class="dropdown-item" href="#">Third Item</a>
                </div>
            </div>
        </div>
        <div class="col d-flex align-items-start">
            <button class="btn btn-primary bg-dark fw-bold py-1 px-3 " type="button" style="color: #777E90;border-radius: 20px;border: none;" disabled>Previous</button>
            <button class="btn btn-primary bg-white fw-bold py-1 px-3 mx-3" type="button" style="color: var(--bs-body-color);border-radius: 20px;border-color: white;">1</button>
            <button class="btn btn-primary bg-dark fw-bold py-1 px-3" type="button" style="color: #777E90;border-radius: 20px;border: none;" disabled>Next</button>
        </div>
        <div class="col-3 d-flex justify-content-end">
            <button class="btn btn-primary px-3" type="button" style="border-radius: 20px;">
                Filter&nbsp;
                <span>
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="-64 0 512 512" width="1em" height="1em" fill="currentColor">
                        <path d="M376.6 427.5c11.31 13.58 9.484 33.75-4.094 45.06c-5.984 4.984-13.25 7.422-20.47 7.422c-9.172 0-18.27-3.922-24.59-11.52L192 305.1l-135.4 162.5c-6.328 7.594-15.42 11.52-24.59 11.52c-7.219 0-14.48-2.438-20.47-7.422c-13.58-11.31-15.41-31.48-4.094-45.06l142.9-171.5L7.422 84.5C-3.891 70.92-2.063 50.75 11.52 39.44c13.56-11.34 33.73-9.516 45.06 4.094L192 206l135.4-162.5c11.3-13.58 31.48-15.42 45.06-4.094c13.58 11.31 15.41 31.48 4.094 45.06l-142.9 171.5L376.6 427.5z"></path>
                    </svg>
                </span>
            </button>
        </div>
    </div>
    <hr style="color: #777E90;">
    <div class="row">
        <div class="col">
            <p class="fw-bold m-0 mb-1" style="color: #777E90;">STYLE</p>
            <div class="dropdown" style="width: 95%;">
                <button class="btn btn-primary dropdown-toggle bg-dark text-start w-100" aria-expanded="false" data-bs-toggle="dropdown" type="button" style="border-radius: 10px;border: 2px solid #353945;">Weighted</button>
                <div class="dropdown-menu">
                    <a class="dropdown-item" href="#">First Item</a><a class="dropdown-item" href="#">Second Item</a><a class="dropdown-item" href="#">Third Item</a>
                </div>
            </div>
        </div>
        <div class="col">
            <p class="fw-bold m-0 mb-1" style="color: #777E90;">TIME OF DAY</p>
            <div class="dropdown" style="width: 95%;">
                <button class="btn btn-primary dropdown-toggle w-100 bg-dark text-start" aria-expanded="false" data-bs-toggle="dropdown" type="button" style="/*width: inherit;*/border-radius: 10px;border: 2px solid #353945;">Morning</button>
                <div class="dropdown-menu">
                    <a class="dropdown-item" href="#">First Item</a><a class="dropdown-item" href="#">Second Item</a><a class="dropdown-item" href="#">Third Item</a>
                </div>
            </div>
        </div>
        <div class="col">
            <p class="fw-bold m-0 mb-1" style="color: #777E90;">INTENSITY</p>
            <div class="dropdown" style="width: 95%;">
                <button class="btn btn-primary dropdown-toggle w-100 bg-dark text-start" aria-expanded="false" data-bs-toggle="dropdown" type="button" style="/*width: inherit;*/border-radius: 10px;border: 2px solid #353945;">Low</button>
                <div class="dropdown-menu">
                    <a class="dropdown-item" href="#">First Item</a><a class="dropdown-item" href="#">Second Item</a><a class="dropdown-item" href="#">Third Item</a>
                </div>
            </div>
        </div>
        <div class="col">
            <p class="fw-bold m-0 mb-1" style="color: #777E90;">VOLUME</p>
            <div class="dropdown" style="width: 95%;">
                <button class="btn btn-primary dropdown-toggle w-100 bg-dark text-start" aria-expanded="false" data-bs-toggle="dropdown" type="button" style="/*width: inherit;*/border-radius: 10px;border: 2px solid #353945;">High</button>
                <div class="dropdown-menu">
                    <a class="dropdown-item" href="#">First Item</a><a class="dropdown-item" href="#">Second Item</a><a class="dropdown-item" href="#">Third Item</a>
                </div>
            </div>
        </div>
    </div>
</div>
<div class="container mt-5 px-5">
    <div class="row">
        @if (_workouts is not null)
        {
            foreach (var workoutView in _workouts)
            {
                <Workout Name="@workoutView.Name" Notes="@workoutView.Notes" CompletedOn="@workoutView.CompletedOn" />
            }
        }
    </div>
</div>

@code {
    private List<WorkoutView>? _workouts;

    protected override async Task OnInitializedAsync()
    {
        var bearer = BearerHeader.Construct((await _authenticationProvider.GetTokenAsync())!);
        var response = await _client.GetAllWorkoutsAsync(bearer);

        if (response.IsSuccessStatusCode)
        {
            _workouts = response.Content;
        }

        StateHasChanged();
    }

}